# 중간계 온톨로지 데이터 분석 플랫폼 - 사용자 매뉴얼

**버전**: 1.0  
**작성일**: 2024년 12월 7일  
**작성기관**: 중간계 AI 연구소

---

## 📋 목차

1. [시스템 개요](#1-시스템-개요)
2. [서버 실행 방법](#2-서버-실행-방법)
3. [로그인 방법](#3-로그인-방법)
4. [CSV 데이터 업로드](#4-csv-데이터-업로드)
5. [관리자 대시보드](#5-관리자-대시보드)
6. [회귀분석 사용법](#6-회귀분석-사용법)
7. [AI 결과 해석](#7-ai-결과-해석)
8. [문제 해결](#8-문제-해결)

---

## 1. 시스템 개요

### 1.1 플랫폼 소개

중간계 온톨로지 데이터 분석 플랫폼은 고객사의 매출 데이터를 수집하고, 다중회귀분석을 통해 매출에 영향을 미치는 요인을 분석하는 시스템입니다.

### 1.2 주요 기능

| 기능 | 설명 |
|------|------|
| CSV 업로드 | 고객사 매출 데이터 업로드 및 저장 |
| 데이터 관리 | 고객사별 데이터 조회 및 관리 |
| 회귀분석 | 다중회귀분석 (Enter/Stepwise) |
| 통계 결과 | SPSS 스타일 결과 출력 |
| AI 해석 | ChatGPT를 활용한 결과 해석 |

### 1.3 시스템 구성

```
┌─────────────────────────────────────────────────────────┐
│                    사용자 (브라우저)                      │
└─────────────────────────────────────────────────────────┘
                           │
                           ▼
┌─────────────────────────────────────────────────────────┐
│              Next.js 웹 서버 (포트: 3000)                 │
│              http://localhost:3000                       │
└─────────────────────────────────────────────────────────┘
          │                              │
          ▼                              ▼
┌──────────────────┐          ┌──────────────────────────┐
│    Supabase      │          │  Python FastAPI 서버      │
│  (데이터베이스)   │          │  (포트: 8000)             │
│                  │          │  회귀분석 엔진            │
└──────────────────┘          └──────────────────────────┘
```

---

## 2. 서버 실행 방법

### 2.1 사전 요구사항

- **Node.js** 18.0 이상
- **Python** 3.9 이상
- **npm** 또는 **yarn**

### 2.2 Next.js 웹 서버 실행

1. **터미널 열기** (PowerShell 또는 Command Prompt)

2. **프로젝트 폴더로 이동**
   ```powershell
   cd C:\Users\USER\midcamstone-data-app
   ```

3. **의존성 설치** (최초 1회)
   ```powershell
   npm install
   ```

4. **개발 서버 실행**
   ```powershell
   npm run dev
   ```

5. **접속 확인**
   - 브라우저에서 `http://localhost:3000` 접속
   - "중간계 AI 연구소 데이터 분석 플랫폼" 페이지가 표시되면 성공

### 2.3 Python 회귀분석 서버 실행

1. **새 터미널 열기**

2. **Python API 폴더로 이동**
   ```powershell
   cd C:\Users\USER\midcamstone-data-app\scripts\api
   ```

3. **의존성 설치** (최초 1회)
   ```powershell
   pip install fastapi uvicorn statsmodels pandas numpy scipy scikit-learn python-multipart python-dotenv
   ```

4. **서버 실행**
   ```powershell
   python main.py
   ```

5. **실행 확인**
   - 콘솔에 다음 메시지가 표시되면 성공:
   ```
   ==================================================
   회귀분석 API 서버 시작
   URL: http://localhost:8000
   문서: http://localhost:8000/docs
   ==================================================
   ```

### 2.4 서버 실행 순서 요약

```
1️⃣ Next.js 서버 실행     →  npm run dev
2️⃣ Python 서버 실행      →  python main.py
3️⃣ 브라우저 접속         →  http://localhost:3000
```

⚠️ **중요**: 회귀분석 기능을 사용하려면 **반드시 Python 서버가 실행 중**이어야 합니다.

---

## 3. 로그인 방법

### 3.1 로그인 페이지 접속

1. 브라우저에서 `http://localhost:3000` 접속
2. 자동으로 로그인 페이지(`/login`)로 이동됩니다

### 3.2 관리자 로그인

| 항목 | 값 |
|------|------|
| 이메일 | `bcshin03@gmail.com` |
| 비밀번호 | `1234` (초기값) |

1. 이메일 입력
2. 비밀번호 입력
3. **로그인** 버튼 클릭

### 3.3 고객사 회원가입

1. 로그인 페이지에서 **회원가입** 탭 클릭
2. 이메일 입력
3. 비밀번호 입력 (6자 이상)
4. 회사명 입력 (선택)
5. **회원가입** 버튼 클릭

### 3.4 비밀번호 변경

1. 로그인 후 우측 상단의 **⚙️ 설정** 클릭
2. 새 비밀번호 입력
3. 새 비밀번호 확인 입력
4. **비밀번호 변경** 버튼 클릭

---

## 4. CSV 데이터 업로드

### 4.1 업로드 페이지 접속

- 관리자: 홈 → **CSV 업로드** 버튼 클릭
- 고객사: 로그인 후 자동으로 업로드 페이지로 이동
- URL: `http://localhost:3000/upload`

### 4.2 파일 형식

| 항목 | 규격 |
|------|------|
| 파일 형식 | `.csv` |
| 인코딩 | UTF-8 또는 EUC-KR |
| 파일명 예시 | `맛나감자탕251206.csv` |

### 4.3 업로드 절차

1. **회사명 입력** (예: 맛나감자탕)
2. **파일 선택** 버튼 클릭
3. CSV 파일 선택
4. **미리보기** 확인 (첫 5행 표시)
5. **업로드** 버튼 클릭
6. 업로드 완료 메시지 확인

### 4.4 권장 컬럼 구조

```
날짜, 총매출, 실매출, 총할인, 배달결제, 매장결제, 
파워링크노출수, 파워링크클릭수, 파워링크광고비,
플레이스노출수, 플레이스클릭수, 플레이스광고비,
회전율, 요일, 기온, 강수여부 ...
```

---

## 5. 관리자 대시보드

### 5.1 대시보드 접속

- URL: `http://localhost:3000/admin`
- 관리자 로그인 필요

### 5.2 화면 구성

```
┌─────────────────────────────────────────────────────┐
│  📊 고객사 관리 대시보드                             │
├─────────────────────────────────────────────────────┤
│                                                     │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐ │
│  │ 맛나감자탕   │  │  고객사B    │  │  고객사C    │ │
│  │ 파일: 3개   │  │ 파일: 2개   │  │ 파일: 1개   │ │
│  │ 행: 153     │  │ 행: 98      │  │ 행: 51      │ │
│  └─────────────┘  └─────────────┘  └─────────────┘ │
│                                                     │
└─────────────────────────────────────────────────────┘
```

### 5.3 기능

| 기능 | 설명 |
|------|------|
| 고객사 목록 | 등록된 고객사 카드 형태로 표시 |
| 파일 개수 | 해당 고객사의 업로드된 파일 수 |
| 총 행 수 | 전체 데이터 행 수 |
| 클릭 | 해당 고객사의 상세 페이지로 이동 |

### 5.4 고객사 상세 페이지

- 해당 고객사의 모든 업로드 파일 목록 표시
- 각 파일(테이블) 클릭 시 데이터 조회 페이지로 이동

---

## 6. 회귀분석 사용법

### 6.1 회귀분석 페이지 접속

1. 관리자 대시보드 → 고객사 선택 → 테이블 선택
2. 우측 상단의 **📊 회귀분석** 버튼 클릭
3. 새 페이지에서 회귀분석 시작

### 6.2 변수 설정

#### 종속변수 (Y) 선택
- 드롭다운에서 분석하고자 하는 종속변수 선택
- 예: `총매출`, `실매출`

#### 독립변수 (X) 선택
- 체크박스로 독립변수 선택 (복수 선택 가능)
- **전체 선택** 버튼으로 모든 변수 선택 가능
- 예: `총할인`, `배달결제`, `플레이스광고비` 등

### 6.3 분석 방법 선택

| 방법 | 설명 |
|------|------|
| **Enter (입력)** | 모든 독립변수를 한 번에 투입 |
| **Stepwise (단계적)** | 유의한 변수만 자동 선택 (p < 0.05) |

### 6.4 분석 실행

1. 종속변수 선택
2. 독립변수 선택 (최소 1개 이상)
3. 분석 방법 선택
4. **🚀 분석 실행** 버튼 클릭
5. 결과 표시까지 대기 (약 2-5초)

### 6.5 결과 해석

분석 결과는 다음 섹션으로 구성됩니다:

1. **📐 회귀식** - 분석된 회귀 방정식
2. **📊 변수별 영향력 시각화** - 산점도 그래프
3. **📋 기술통계량 표** - 평균, 표준편차, Q1, Q3 등
4. **🔗 상관관계 행렬** - 변수 간 상관계수
5. **📊 모델 적합도 요약** - R², Adjusted R², F-통계량
6. **📈 ANOVA 표** - 분산분석 결과
7. **📈 회귀계수 표** - B, Beta, t, p-value, VIF
8. **🔍 잔차 진단** - Jarque-Bera, Durbin-Watson, 이상치
9. **📉 실측치 vs 예측치** - 테이블 및 그래프

### 6.6 결과 복사

- **📋 통계결과 복사하기** 버튼 클릭
- 모든 통계표가 텍스트 형태로 클립보드에 복사됨
- 워드, 한글 등에 붙여넣기 가능

---

## 7. AI 결과 해석

### 7.1 AI 해석 기능

회귀분석 결과를 ChatGPT가 자영업자 관점에서 해석해줍니다.

### 7.2 사용 방법

1. 회귀분석 결과 화면에서 **🤖 AI 결과해석** 버튼 클릭
2. 모달창에서 GPT 모델 선택
   - `gpt-4o-mini` (빠름, 저렴)
   - `gpt-4o` (정확, 상세)
3. **해석 요청** 버튼 클릭
4. 결과 대기 (약 10-30초)

### 7.3 해석 내용

AI가 제공하는 해석은 다음을 포함합니다:

- 한 줄 요약
- 분석 신뢰도 평가
- 매출 증가 효과 숫자 해석
- 실전 전략 제안 (최소 3개)
- 모델의 한계와 경고
- 다음 단계 분석 제안

⚠️ **주의**: AI 해석을 사용하려면 `.env.local` 파일에 `OPENAI_API_KEY`가 설정되어 있어야 합니다.

---

## 8. 문제 해결

### 8.1 서버 연결 오류

**증상**: "분석 서버에 연결할 수 없습니다"

**해결**:
1. Python 서버가 실행 중인지 확인
2. 터미널에서 `python main.py` 실행
3. 포트 8000이 사용 중인지 확인

### 8.2 로그인 실패

**증상**: "Invalid login credentials"

**해결**:
1. 이메일/비밀번호 확인
2. Supabase 대시보드에서 사용자 확인
3. 비밀번호 재설정

### 8.3 CSV 업로드 실패

**증상**: "데이터 저장 실패"

**해결**:
1. CSV 파일 인코딩 확인 (UTF-8 권장)
2. 컬럼명에 특수문자가 있는지 확인
3. 빈 행이나 잘못된 데이터 확인

### 8.4 회귀분석 오류

**증상**: "분석 중 오류 발생"

**해결**:
1. 종속변수와 독립변수가 겹치지 않는지 확인
2. 숫자형 데이터인지 확인
3. 결측치가 너무 많지 않은지 확인
4. 완벽한 다중공선성이 있는지 확인 (예: 총매출 = 실매출 + 총할인)

### 8.5 포트 충돌

**증상**: "Port 3000 is already in use"

**해결** (PowerShell):
```powershell
# 3000번 포트 사용 중인 프로세스 확인
netstat -ano | findstr :3000

# 해당 PID 프로세스 종료
taskkill /F /PID [PID번호]
```

---

## 📞 기술 지원

- **개발사**: 중간계 AI 연구소
- **이메일**: bcshin03@gmail.com

---

**© 2024 중간계 AI 연구소. All rights reserved.**

